"use strict";(globalThis.webpackChunktonatiuhxx_blog=globalThis.webpackChunktonatiuhxx_blog||[]).push([[747],{3030:e=>{e.exports=JSON.parse('{"permalink":"/tonatiuhpp-blog/build-macos","source":"@site/blog/2025-12-03-build-macos.md","title":"Building Tonatiuh++ on macOS","description":"Tonatiuh++ running on macOS","date":"2025-12-03T00:00:00.000Z","tags":[{"inline":false,"label":"macOS","permalink":"/tonatiuhpp-blog/tags/macos","description":"Posts about building and running Tonatiuh++ on macOS."},{"inline":false,"label":"Build","permalink":"/tonatiuhpp-blog/tags/build","description":"Posts about building Tonatiuh++ from source on different platforms."},{"inline":false,"label":"Development","permalink":"/tonatiuhpp-blog/tags/development","description":"Technical notes and development updates for Tonatiuh++."}],"readingTime":5.89,"hasTruncateMarker":true,"authors":[{"name":"Manuel Blanco","title":"Tonatiuh++ Developer & CST Researcher","url":"https://github.com/mblancomuriel","socials":{"github":"https://github.com/CST-Modelling-Tools"},"imageURL":"https://github.com/mblancomuriel.png","key":"mblanco","page":null}],"frontMatter":{"slug":"build-macos","title":"Building Tonatiuh++ on macOS","authors":"mblanco","tags":["macos","build","development"]},"unlisted":false,"nextItem":{"title":"Building Tonatiuh++ from Source: A Cross-Platform Overview","permalink":"/tonatiuhpp-blog/build-overview"}}')},4324:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/tonatiuhxx-apple-screenshot-01f57a69bb5ace9ee3c09c2520df595a.png"},7602:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var l=i(3030),t=i(4848),s=i(8453);const a={slug:"build-macos",title:"Building Tonatiuh++ on macOS",authors:"mblanco",tags:["macos","build","development"]},r=void 0,o={authorsImageUrls:[void 0]},d=[{value:"Installing Homebrew",id:"installing-homebrew",level:2},{value:"Installing required Development Tools",id:"installing-required-development-tools",level:2},{value:"Installing core tools via Homebrew",id:"installing-core-tools-via-homebrew",level:2},{value:"Verify core tools installation:",id:"verify-core-tools-installation",level:3},{value:"Installing Qt 6",id:"installing-qt-6",level:2},{value:"Verify the Qt installation",id:"verify-the-qt-installation",level:3},{value:"Cloning the Tonatiuh++ repository",id:"cloning-the-tonatiuh-repository",level:2},{value:"Building third-party dependencies",id:"building-third-party-dependencies",level:2},{value:"Create and activate a Python virtual environment",id:"create-and-activate-a-python-virtual-environment",level:3},{value:"Install required Python packages",id:"install-required-python-packages",level:3},{value:"Run the dependency build script",id:"run-the-dependency-build-script",level:3},{value:"Troubleshoot network / SSL issues (rare)",id:"troubleshoot-network--ssl-issues-rare",level:3},{value:"Configuring the build with CMake",id:"configuring-the-build-with-cmake",level:2},{value:"Building and installing Tonatiuh++",id:"building-and-installing-tonatiuh",level:2},{value:"Running Tonatiuh++",id:"running-tonatiuh",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Qt 6 not detected by CMake",id:"qt-6-not-detected-by-cmake",level:3},{value:"build_deps.py fails to start",id:"build_depspy-fails-to-start",level:3},{value:"Diagnose the environment",id:"diagnose-the-environment",level:3},{value:"Summary",id:"summary",level:2}];function c(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Tonatiuh++ running on macOS",src:i(4324).A+"",width:"2000",height:"1125"})}),"\n",(0,t.jsxs)(n.p,{children:["macOS provides a clean and robust environment for building ",(0,t.jsx)(n.strong,{children:"Tonatiuh++"})," thanks to its modern ",(0,t.jsx)(n.strong,{children:"Apple Clang"})," compiler, strong UNIX foundations, and excellent package management through ",(0,t.jsx)(n.strong,{children:"Homebrew"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["This guide describes the complete process for building Tonatiuh++ from source on ",(0,t.jsx)(n.strong,{children:"macOS Ventura, Sonoma, and newer"}),", including installing the required development tools, building third-party dependencies using the scripts provided in the repository, configuring the project with CMake, and compiling the final application."]}),"\n",(0,t.jsxs)(n.p,{children:["The workflow is ",(0,t.jsx)(n.strong,{children:"entirely command-line\u2013based"})," and uses the system ",(0,t.jsx)(n.strong,{children:"Clang toolchain"})," provided by Xcode Command Line Tools. No IDE integration is required."]}),"\n",(0,t.jsx)(n.h2,{id:"installing-homebrew",children:"Installing Homebrew"}),"\n",(0,t.jsx)(n.p,{children:"Homebrew is the standard package manager on macOS and will be used throughout this guide to install build tools and libraries."}),"\n",(0,t.jsxs)(n.p,{children:["If Homebrew is not already installed, open ",(0,t.jsx)(n.strong,{children:"Terminal"})," and run:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"\n'})}),"\n",(0,t.jsx)(n.p,{children:"After installation completes, update Homebrew:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew update\n"})}),"\n",(0,t.jsx)(n.p,{children:"Homebrew works transparently on both Apple Silicon and Intel Macs and will be used to install CMake, Python, Qt 6, and additional development libraries required by Tonatiuh++."}),"\n",(0,t.jsx)(n.h2,{id:"installing-required-development-tools",children:"Installing required Development Tools"}),"\n",(0,t.jsxs)(n.p,{children:["Tonatiuh++ is built on macOS using the ",(0,t.jsx)(n.strong,{children:"Apple Clang"})," compiler and the system SDK provided by Xcode Command Line Tools."]}),"\n",(0,t.jsx)(n.p,{children:"Install the required compiler and developer tools by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"xcode-select --install\n"})}),"\n",(0,t.jsx)(n.p,{children:"This installs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apple Clang (C++20 capable)"}),"\n",(0,t.jsx)(n.li,{children:"macOS SDK"}),"\n",(0,t.jsx)(n.li,{children:"Build utilities (make, ld, etc.)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Verify the compiler:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"clang++ --version\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see Apple Clang 14 or newer. If the command is not found, ensure that Xcode Command Line Tools are installed and selected by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"xcode-select -p\n"})}),"\n",(0,t.jsx)(n.p,{children:"This command should print a path similar to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"/Library/Developer/CommandLineTools\n"})}),"\n",(0,t.jsx)(n.p,{children:"If no path is shown or an error is reported, reinstall the tools:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo xcode-select --reset\nxcode-select --install\n"})}),"\n",(0,t.jsx)(n.p,{children:"After installation completes, close the terminal, open a new one, and retry:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"clang++ --version\n"})}),"\n",(0,t.jsx)(n.h2,{id:"installing-core-tools-via-homebrew",children:"Installing core tools via Homebrew"}),"\n",(0,t.jsx)(n.p,{children:"Install the core tools required to build Tonatiuh++ using Homebrew:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install cmake git python\n"})}),"\n",(0,t.jsx)(n.p,{children:"This installs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CMake \u2013 project configuration and build system"}),"\n",(0,t.jsx)(n.li,{children:"Git \u2013 source control and dependency fetching"}),"\n",(0,t.jsx)(n.li,{children:"Python 3 \u2013 required to run the dependency build scripts"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Optional (recommended)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install ninja pkg-config\n"})}),"\n",(0,t.jsx)(n.p,{children:"Ninja provides significantly faster builds than Make, but is not required. pkg-config helps some third-party libraries locate system dependencies."}),"\n",(0,t.jsx)(n.h3,{id:"verify-core-tools-installation",children:"Verify core tools installation:"}),"\n",(0,t.jsx)(n.p,{children:"Confirm that the required tools are available:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cmake --version\ngit --version\npython3 --version\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Each command should print a version number. If any command is not found, ensure Homebrew is correctly installed and that ",(0,t.jsx)(n.code,{children:"/opt/homebrew/bin"})," is present in your PATH."]}),"\n",(0,t.jsx)(n.h2,{id:"installing-qt-6",children:"Installing Qt 6"}),"\n",(0,t.jsxs)(n.p,{children:["Tonatiuh++ requires ",(0,t.jsx)(n.strong,{children:"Qt 6.x"})," for its graphical user interface."]}),"\n",(0,t.jsx)(n.p,{children:"Install Qt via Homebrew:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install qt@6\n"})}),"\n",(0,t.jsx)(n.p,{children:"On macOS, Homebrew installs Qt into a standard prefix:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Apple Silicon:"})," /opt/homebrew/opt/qt@6"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Intel Macs:"})," /usr/local/opt/qt@6"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Qt provides CMake configuration files under:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"<qt-prefix>/lib/cmake/Qt6\n"})}),"\n",(0,t.jsx)(n.p,{children:"which allows CMake to locate Qt automatically during configuration."}),"\n",(0,t.jsx)(n.h3,{id:"verify-the-qt-installation",children:"Verify the Qt installation"}),"\n",(0,t.jsx)(n.p,{children:"You can verify that Qt 6 is installed by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"qtpaths --qt-version\n"})}),"\n",(0,t.jsx)(n.p,{children:"This should report a Qt 6.x version."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),"\nQt does not need to be added to your PATH. The Tonatiuh++ build system and dependency scripts will locate Qt automatically using CMake."]}),"\n",(0,t.jsx)(n.h2,{id:"cloning-the-tonatiuh-repository",children:"Cloning the Tonatiuh++ repository"}),"\n",(0,t.jsx)(n.p,{children:"Choose a working directory and clone the repository together with its submodules:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone --recurse-submodules https://github.com/CST-Modelling-Tools/tonatiuhpp.git\ncd tonatiuhpp\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you already cloned the repository without submodules, initialize them with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git submodule update --init --recursive\n"})}),"\n",(0,t.jsx)(n.h2,{id:"building-third-party-dependencies",children:"Building third-party dependencies"}),"\n",(0,t.jsxs)(n.p,{children:["Tonatiuh++ relies on several third-party libraries, including ",(0,t.jsx)(n.strong,{children:"Coin3D"}),", ",(0,t.jsx)(n.strong,{children:"SoQt"}),", and ",(0,t.jsx)(n.strong,{children:"simage"}),", which are built locally using a Python script provided in the repository."]}),"\n",(0,t.jsx)(n.h3,{id:"create-and-activate-a-python-virtual-environment",children:"Create and activate a Python virtual environment"}),"\n",(0,t.jsx)(n.p,{children:"On macOS, Homebrew-managed Python requires third-party packages to be installed inside a virtual environment."}),"\n",(0,t.jsx)(n.p,{children:"From the root of the repository, create a virtual environment:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python3 -m venv .venv\n"})}),"\n",(0,t.jsx)(n.p,{children:"Activate it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n"})}),"\n",(0,t.jsx)(n.p,{children:"Your shell prompt should now indicate that the environment is active."}),"\n",(0,t.jsx)(n.h3,{id:"install-required-python-packages",children:"Install required Python packages"}),"\n",(0,t.jsx)(n.p,{children:"Install PyYAML, which is required by the dependency build script:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install --upgrade pip\npip install pyyaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-the-dependency-build-script",children:"Run the dependency build script"}),"\n",(0,t.jsx)(n.p,{children:"With the virtual environment active, run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python scripts/build_deps.py\n"})}),"\n",(0,t.jsx)(n.p,{children:"The script will:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"detect Qt, CMake, and system tools,"}),"\n",(0,t.jsx)(n.li,{children:"download and build third-party libraries,"}),"\n",(0,t.jsx)(n.li,{children:"install them under third_party/_install,"}),"\n",(0,t.jsx)(n.li,{children:"generate CMake hint files for later configuration."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The initial run may take several minutes."}),"\n",(0,t.jsx)(n.h3,{id:"troubleshoot-network--ssl-issues-rare",children:"Troubleshoot network / SSL issues (rare)"}),"\n",(0,t.jsx)(n.p,{children:"If you encounter SSL errors while downloading sources, ensure that your Python environment has up-to-date certificates:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install --upgrade certifi\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then rerun the build script."}),"\n",(0,t.jsx)(n.h2,{id:"configuring-the-build-with-cmake",children:"Configuring the build with CMake"}),"\n",(0,t.jsx)(n.p,{children:"After building the third-party dependencies, configure Tonatiuh++ using CMake."}),"\n",(0,t.jsx)(n.p,{children:"From the root of the repository, run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cmake -S source -B build -DCMAKE_BUILD_TYPE=Release\n"})}),"\n",(0,t.jsx)(n.p,{children:"CMake will automatically locate all required dependencies using:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"the locally built third-party libraries under third_party/_install,"}),"\n",(0,t.jsx)(n.li,{children:"the generated cmake/LocalDepsHints.cmake file,"}),"\n",(0,t.jsx)(n.li,{children:"Qt 6 installed via Homebrew."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If configuration completes successfully, CMake will report that it has found:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"the Apple Clang compiler,"}),"\n",(0,t.jsx)(n.li,{children:"Qt 6,"}),"\n",(0,t.jsx)(n.li,{children:"Coin3D and SoQt."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"building-and-installing-tonatiuh",children:"Building and installing Tonatiuh++"}),"\n",(0,t.jsx)(n.p,{children:"After configuring the project, build and install Tonatiuh++:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cmake --build build --parallel\ncmake --install build\n"})}),"\n",(0,t.jsx)(n.p,{children:"By default, Tonatiuh++ is installed into a user-local directory (for example ~/tonatiuhpp)."}),"\n",(0,t.jsx)(n.p,{children:"On macOS, the application bundle will be located at:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"<install-prefix>/bin/TonatiuhXX.app\n"})}),"\n",(0,t.jsx)(n.h2,{id:"running-tonatiuh",children:"Running Tonatiuh++"}),"\n",(0,t.jsx)(n.p,{children:"You can launch the application either from Finder or from the terminal:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"open ~/tonatiuhpp/bin/tonatiuhpp.app\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"qt-6-not-detected-by-cmake",children:"Qt 6 not detected by CMake"}),"\n",(0,t.jsx)(n.p,{children:"If CMake reports that Qt 6 cannot be found, first verify that Qt is installed via Homebrew:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"qtpaths --qt-version\n"})}),"\n",(0,t.jsx)(n.p,{children:"This should report a Qt 6.x version."}),"\n",(0,t.jsx)(n.p,{children:"If Qt is installed but CMake still fails to configure, ensure that the dependency build step completed successfully and that cmake/LocalDepsHints.cmake exists in the repository."}),"\n",(0,t.jsx)(n.h3,{id:"build_depspy-fails-to-start",children:"build_deps.py fails to start"}),"\n",(0,t.jsx)(n.p,{children:"On macOS, Homebrew-managed Python requires running the dependency script inside a virtual environment."}),"\n",(0,t.jsx)(n.p,{children:"Ensure that the virtual environment is activated:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then verify that PyYAML is installed:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'python -c "import yaml; print(yaml.__version__)"\n'})}),"\n",(0,t.jsx)(n.p,{children:"If needed, reinstall it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install pyyaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"diagnose-the-environment",children:"Diagnose the environment"}),"\n",(0,t.jsx)(n.p,{children:"To check your system configuration and dependency discovery, you can run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python scripts/build_deps.py --doctor\n"})}),"\n",(0,t.jsx)(n.p,{children:"This diagnostic mode reports missing tools, misconfigured paths, and common macOS setup issues."}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(n.p,{children:["In this guide, you built and installed ",(0,t.jsx)(n.strong,{children:"Tonatiuh++"})," from source on macOS. The process consisted of the following main steps:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Install Homebrew and the required developer tools."}),"\n",(0,t.jsx)(n.li,{children:"Install core build tools (CMake, Git, Python) and Qt 6 using Homebrew."}),"\n",(0,t.jsx)(n.li,{children:"Clone the Tonatiuh++ repository with its submodules."}),"\n",(0,t.jsxs)(n.li,{children:["Build the required third-party dependencies using ",(0,t.jsx)(n.code,{children:"build_deps.py"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Configure the project with CMake."}),"\n",(0,t.jsx)(n.li,{children:"Build and install the application."}),"\n",(0,t.jsx)(n.li,{children:"Launch the installed macOS application bundle."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"macOS provides a clean and reliable build environment for Tonatiuh++ thanks to its modern Clang toolchain, robust UNIX foundations, and mature package ecosystem."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var l=i(6540);const t={},s=l.createContext(t);function a(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);